# bash-deploy
---
### Зависимости
##### Скорее всего уже предустановлены
```
sudo apt-get install curl openssh-client unzip
```
##### Для подключения по паролю (в целом опционально)
```
sudo apt-get install sshpass
```

### Использование
##### Возможные аргументы
```
-c || --config    путь к файлу конфигурации (хранит url и token) (def: .deployconfig)
-h || --hosts    путь к файлу с информацией о хостах (def: .hosts)
-a || --artifacts    путь к файлу с информацией об артефактах (def: .artifacts)
-s || --scenario    путь к файлу с комбинациями артефакт-хост-директория (def: main.dsc)
-p    немедленный запуск сценария
```
##### Формирование сценария
1. Указать url и token ("Configure API")
2. Добавить машины ("Hosts modification")
3. Добавить артефакты  ("Artifacts modification")
4. Добавить комбинации артефакт-машина-директория ("Scenario modification")
##### PS
- Любой путь, не начинающийся со "/" выполняется из $HOME
- Не нужно писать "~" для указания $HOME директории, иначе путь будет воспринят некорректно
- Для Windows, указание абсолютного пути (с диском) должно начинаться со /<disk>/... (e.g. /c/Users/admin/...)
- Если к машине можно подключиться по ключу (не вводя его), пароль можно не указывать
- Для артефактов можно указать конкретные файлы, разделяя их ';'
- Если для одного артефакта на разные машины нужно загрузить разные файлы, придётся добавить несколько артефактов (можно использовать опцию 'copy')
- В каждом разделе "X modification" и "Configure API" есть опция 'print'
